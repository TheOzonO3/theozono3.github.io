<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Герои тупа</title>
	  <link rel="stylesheet" href="classes.css">
    <script src="https://kit.fontawesome.com/1f9cc497c9.js" crossorigin="anonymous"></script>    </head>
  </head>

  <body>
    
    <header>
      <button class="btn" onClick='location.href="./cindex.html"'><i class="fa fa-home"></i> Главная </button>
      <button class="btn" onClick='location.href="./classes.html"'><i class="fas fa-user-circle"></i> Персонажи </button>
      <button class="btn" onClick='location.href="./health.html"'><i class="fas fa-heart"></i> Здоровье </button>
      <button class="btn" onClick='location.href="./stats.html"'><i class="fas fa-calendar-plus"></i> Характеристики </button>
    </header>

      <section>

      </section>
      <span class="buttons">
        <button class="btn" onclick="classSelector('p')"><i class="fas fa-arrow-alt-circle-left"></i> Prev </button>
        <button class="btn" onclick="classSelector('n')"> Next <i class="fas fa-arrow-alt-circle-right"></i></button>
      </span>
    <script>
    const classes =[
      'myList1',
      'myList2',
      'myList3',
      'myList4',
      'myList5'
    ]
    function classSelector(direction) {
      const showed = document.getElementsByClassName(`show`)
      let ish;
      let classlist = [
        showed[0].classList.contains(classes[0]),
        showed[0].classList.contains(classes[1]),
        showed[0].classList.contains(classes[2]),
        showed[0].classList.contains(classes[3]),
        showed[0].classList.contains(classes[4]),
      ]
      showed[0].classList.toggle(`show`)
      switch (true) {
        case classlist[0]:
          ish = 0;
          break;
        case classlist[1]:
          ish = 1;
          break;
        case classlist[2]:
          ish = 2;
          break;
        case classlist[3]:
          ish = 3;
        break;
        case classlist[4]:
          ish = 4;
          break;
      }
      if(direction == 'n'){
        let ishs = ish+1
        if(ishs>classes.length-1) {
          ishs = 0
        }
        let doc = document.getElementsByClassName(classes[ishs])

        doc[0].classList.toggle(`show`)
      } else if(direction == 'p'){
        let ishs = ish-1
        if(ish-1<0) ishs = classes.length-1
        let doc = document.getElementsByClassName(classes[ishs])
        doc[0].classList.toggle(`show`)
      }
    }
    const header = document.querySelector('header');
    const section = document.querySelector('section');

    let requestURL = 'https://raw.githubusercontent.com/TheOzonO3/theozono3.github.io/master/class.json';
    let request = new XMLHttpRequest();
    request.open('GET', requestURL);
    request.responseType = 'json';
    request.send();

    request.onload = function() {
      const superHeroes = request.response;
      showHeroes(superHeroes);
    }

    function showHeroes(jsonObj) {
      const heros = jsonObj['class'];
      console.log(heros)

      for(let i = 0; i < heros.length; i++) {
        const ClassDiv = document.createElement('div')
        ClassDiv.classList.add('classdiv')
        const myH2 = document.createElement('div');
        myH2.classList.add(`name`)
        const myList1 = document.createElement('ul');
        const myList2 = document.createElement('ul');
        const myList3 = document.createElement('ul');
        const myList4 = document.createElement('ul');
        const myList5 = document.createElement('ul');
        const lists = [
          myList1,
          myList2,
          myList3,
          myList4,
          myList5,
        ]
        if(i == 0){
          ClassDiv.classList.add(`show`)
        }
        ClassDiv.classList.add(classes[i])
        myH2.innerHTML = `<span class='cfont'>${i+1}</span> ${heros[i].name}`;
        const skills = heros[i].skill;
        for(let j = 0; j < skills.length; j++) {
          let sdesc = skills[j].desc
          const NameItem = document.createElement('li');
          if(j == 0){
            NameItem.innerHTML = `<span class='cfont'>D</span> ${skills[j].name}`;
          } else if(j == 1){
            NameItem.innerHTML = `<span class='cfont'>C</span> ${skills[j].name}`;
          } else if(j == 2){
            NameItem.innerHTML = `<span class='cfont'>1</span> ${skills[j].name}`;
          } else if(j == 3){
            NameItem.innerHTML = `<span class='cfont'>2</span> ${skills[j].name}`;
          } else if(j == 4){
            NameItem.innerHTML = `<span class='cfont'>3</span> ${skills[j].name}`;
          }
          lists[j].appendChild(NameItem);
          NameItem.classList.add('skillname')
          const DescItem = document.createElement('li');
          DescItem.textContent = `${skills[j].desc}`;
          const CostItem = document.createElement('li');
          CostItem.innerHTML = `<span class='cfont'>V</span> ${skills[j].cost}`;
          CostItem.classList.add('cost')
          const DurItem = document.createElement('li');
          DurItem.innerHTML = `<span class='cfont'>U</span> ${skills[j].duration}`;
          DurItem.classList.add('dur')
          const DamageItem = document.createElement('li');
          DamageItem.textContent = `Уроны:`;
          DamageItem.classList.add('none')
          if(skills[j].damage[3].min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`ion`)
            TypeDamage.innerHTML = `<span class='cfont'>H</span> ${skills[j].damage[3].min}-${skills[j].damage[3].max}`
            DamageItem.appendChild(TypeDamage)
          }
          if(skills[j].damage[5].min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`blast`)
            TypeDamage.innerHTML = `<span class='cfont'>F</span> ${skills[j].damage[5].min}-${skills[j].damage[5].max}`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage[1].min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`punct`)
            TypeDamage.innerHTML = `<span class='cfont'>I</span> ${skills[j].damage[1].min}-${skills[j].damage[1].max}`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage[2].min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`impact`)
            TypeDamage.innerHTML = `<span class='cfont'>G</span> ${skills[j].damage[2].min}-${skills[j].damage[2].max}`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage[4].min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`beam`)
            TypeDamage.innerHTML = `<span class='cfont'>J</span> ${skills[j].damage[4].min}-${skills[j].damage[4].max}`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage[0].min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`sla`)
            TypeDamage.innerHTML = `<span class='cfont'>K</span> ${skills[j].damage[0].min}-${skills[j].damage[0].max}`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage[3].min>0||skills[j].damage[5].min>0||skills[j].damage[1].min>0||skills[j].damage[2].min>0||skills[j].damage[4].min>0||skills[j].damage[0].min>0){
            lists[j].appendChild(DamageItem)
          }
          if(typeof sdesc != 'undefined' && sdesc.length>0){
            lists[j].appendChild(DescItem);
          }
          lists[j].appendChild(CostItem);
          if(skills[j].duration>0){
            lists[j].appendChild(DurItem);
          }
        }


        ClassDiv.appendChild(myH2);
        lists.forEach(addlists);
        function addlists(item, index) {
          ClassDiv.appendChild(lists[index])
        }

        section.appendChild(ClassDiv);
      }
    }

    </script>
  </body>
</html>
