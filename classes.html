<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Герои тупа</title>
    <link rel="stylesheet" type="text/css" href="classes.css">
    <script src="https://kit.fontawesome.com/1f9cc497c9.js" crossorigin="anonymous"></script>    </head>
  </head>

  <body>
    
    <header>
      <button class="btn"><i class="fa fa-home"></i> Главная </button>
      <button class="btn"><i class="fa fa-bars"></i></button>
      <button class="btn"><i class="fa fa-trash"></i></button>
    </header>

      <section>

      </section>
      <span class="buttons">
        <button class="btn" onclick="classSelector('p')"><i class="fas fa-arrow-alt-circle-left"></i> Prev </button>
        <button class="btn" onclick="classSelector('n')"> Next <i class="fas fa-arrow-alt-circle-right"></i></button>
      </span>
    <script>
    const classes =[
      'myList1',
      'myList2',
      'myList3',
      'myList4',
      'myList5'
    ]
    function classSelector(direction) {
      const showed = document.getElementsByClassName(`show`)
      let ish;
      let classlist = [
        showed[0].classList.contains(classes[0]),
        showed[0].classList.contains(classes[1]),
        showed[0].classList.contains(classes[2]),
        showed[0].classList.contains(classes[3]),
        showed[0].classList.contains(classes[4]),
      ]
      showed[0].classList.toggle(`show`)
      switch (true) {
        case classlist[0]:
          ish = 0;
          break;
        case classlist[1]:
          ish = 1;
          break;
        case classlist[2]:
          ish = 2;
          break;
        case classlist[3]:
          ish = 3;
        break;
        case classlist[4]:
          ish = 4;
          break;
      }
      if(direction == 'n'){
        let ishs = ish+1
        if(ishs>classes.length-1) {
          ishs = 0
        }
        let doc = document.getElementsByClassName(classes[ishs])

        doc[0].classList.toggle(`show`)
      } else if(direction == 'p'){
        let ishs = ish-1
        if(ish-1<0) ishs = classes.length-1
        let doc = document.getElementsByClassName(classes[ishs])
        doc[0].classList.toggle(`show`)
      }
    }
    const header = document.querySelector('header');
    const section = document.querySelector('section');

    let requestURL = 'https://raw.githubusercontent.com/TheOzonO3/theozono3.github.io/master/class.json';
    let request = new XMLHttpRequest();
    request.open('GET', requestURL);
    request.responseType = 'json';
    request.send();

    request.onload = function() {
      const superHeroes = request.response;
      showHeroes(superHeroes);
    }

    function showHeroes(jsonObj) {
      const heros = jsonObj['class'];
      console.log(heros)

      for(let i = 0; i < heros.length; i++) {
        const ClassDiv = document.createElement('div')
        ClassDiv.classList.add('classdiv')
        const myH2 = document.createElement('div');
        myH2.classList.add(`name`)
        const myList1 = document.createElement('ul');
        const myList2 = document.createElement('ul');
        const myList3 = document.createElement('ul');
        const myList4 = document.createElement('ul');
        const myList5 = document.createElement('ul');
        const lists = [
          myList1,
          myList2,
          myList3,
          myList4,
          myList5,
        ]
        if(i == 0){
          ClassDiv.classList.add(`show`)
        }
        ClassDiv.classList.add(classes[i])
        myH2.textContent = heros[i].name;
        const skills = heros[i].skill;
        for(let j = 0; j < skills.length; j++) {
          let sdesc = skills[j].desc
          const NameItem = document.createElement('li');
          NameItem.textContent = `${skills[j].name}`;
          lists[j].appendChild(NameItem);
          NameItem.classList.add('skillname')
          const DescItem = document.createElement('li');
          DescItem.textContent = `${skills[j].desc}`;
          const CostItem = document.createElement('li');
          CostItem.textContent = `Стоимость: ${skills[j].cost}`;
          const DurItem = document.createElement('li');
          DurItem.textContent = `Длительность: ${skills[j].duration}`;
          const DamageItem = document.createElement('li');
          DamageItem.textContent = `Уроны:`;
          if(skills[j].damage.ion.min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`ion`)
            TypeDamage.textContent = `${skills[j].damage.ion.min}-${skills[j].damage.ion.max} - Ion`
            DamageItem.appendChild(TypeDamage)
          }
          if(skills[j].damage.blast.min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`blast`)
            TypeDamage.textContent = `${skills[j].damage.blast.min}-${skills[j].damage.blast.max} - Blast`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage.punct.min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`punct`)
            TypeDamage.textContent = `${skills[j].damage.punct.min}-${skills[j].damage.punct.max} - Punct`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage.impact.min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`impact`)
            TypeDamage.textContent = `${skills[j].damage.impact.min}-${skills[j].damage.impact.max} - Impact`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage.beam.min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`beam`)
            TypeDamage.textContent = `${skills[j].damage.beam.min}-${skills[j].damage.beam.max} - Beam`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage.sla.min>0){
            const TypeDamage = document.createElement('li')
            TypeDamage.classList.add(`sla`)
            TypeDamage.textContent = `${skills[j].damage.sla.min}-${skills[j].damage.sla.max} - Sla`
            DamageItem.appendChild(TypeDamage)          
          }
          if(skills[j].damage.ion.min>0||skills[j].damage.blast.min>0||skills[j].damage.punct.min>0||skills[j].damage.impact.min>0||skills[j].damage.beam.min>0||skills[j].damage.sla.min>0){
            lists[j].appendChild(DamageItem)
          }
          if(typeof sdesc != 'undefined' && sdesc.length>0){
            lists[j].appendChild(DescItem);
          }
          lists[j].appendChild(CostItem);
          if(skills[j].duration>0){
            lists[j].appendChild(DurItem);
          }
        }


        ClassDiv.appendChild(myH2);
        lists.forEach(addlists);
        function addlists(item, index) {
          ClassDiv.appendChild(lists[index])
        }

        section.appendChild(ClassDiv);
      }
    }

    </script>
  </body>
</html>
